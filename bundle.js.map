{"version":3,"sources":["webpack:///webpack/bootstrap e219d36e75ceb88e6ff2","webpack:///./docs/main.js","webpack:///./docs/game.js","webpack:///./docs/board.js","webpack:///./docs/pew.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA,CAAC;;;;;;;;;ACnBD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,oCAAoC;AACzD,uBAAuB,yCAAyC;AAChE;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,mBAAmB;AACxC,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C,WAAW;AACzD;AACA;AACA,KAAK;AACL;AACA;AACA,sBAAsB,UAAU;AAChC,uBAAuB,UAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC3FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,wBAAwB;AAC7C,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,OAAO;AAChC;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e219d36e75ceb88e6ff2","import Game from './game';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const canvas = document.getElementById('board');\n  const ctx = canvas.getContext('2d');\n  const scoreElement = document.getElementById('score');\n\n  const game = new Game(scoreElement, canvas, ctx);\n\n  const start = document.getElementById('start');\n  start.addEventListener('click', () => {\n    start.className = \"hidden\";\n    game.playing = true;\n    game.board.dropPew();\n  });\n\n\n  window.ctx = ctx;\n  window.game = game;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./docs/main.js\n// module id = 0\n// module chunks = 0","import Board from './board';\n\nclass Game {\n  constructor(scoreElement, canvas, ctx) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.board = new Board(this, canvas, ctx);\n    this.playing = false;\n    this.score = 0;\n    this.scoreElement = scoreElement;\n  }\n\n  resetCheckBoard() {\n    for (let row = 0; row < this.board.checkBoard.length; row++) {\n      for (let col = 0; col < this.board.checkBoard[row].length; col++) {\n        this.board.checkBoard[row][col] = false;\n      }\n    }\n  }\n\n  searchAndDestroy(grid, checkBoard) {\n    let clearPos = [];\n\n    for (let row = 0; row < grid.length; row++) {\n      for (let col = 0; col < grid[row].length; col++) {\n        if (grid[row][col] !== 0) {\n          checkBoard[row][col] = true;\n          let currentPos = [[row,col]];\n          let toClear = this.search(grid, checkBoard, row, col, currentPos);\n          if (toClear.length >= 4) {\n            this.destroy(toClear);\n            this.checkSettle();\n            this.resetCheckBoard();\n            this.searchAndDestroy(grid, checkBoard);\n          } else {\n            this.resetCheckBoard();\n          }\n        }\n      }\n    }\n  }\n  search(grid, checkBoard, row, col, clearPos) {\n    let currentSpot = grid[row][col];\n    if (col > 0 && grid[row][col - 1] === currentSpot && !checkBoard[row][col - 1]) {\n      clearPos.push([row, col - 1]);\n      checkBoard[row][col - 1] = true;\n      this.search(grid, checkBoard, row, col -1, clearPos);\n    }\n    if (col < 9 && grid[row][col + 1] === currentSpot && !checkBoard[row][col + 1]) {\n      clearPos.push([row, col + 1]);\n      checkBoard[row][col + 1] = true;\n      this.search(grid, checkBoard, row, col + 1, clearPos);\n    }\n    if (row > 0 && grid[row - 1][col] === currentSpot && !checkBoard[row - 1][col]) {\n      clearPos.push([row - 1, col]);\n      checkBoard[row - 1][col] = true;\n      this.search(grid, checkBoard, row - 1, col, clearPos);\n    }\n    if (row < 14 && grid[row + 1][col] === currentSpot && !checkBoard[row + 1][col]) {\n      clearPos.push([row + 1, col]);\n      checkBoard[row + 1][col] = true;\n      this.search(grid, checkBoard, row + 1, col, clearPos);\n    }\n\n    return clearPos;\n  }\n  destroy(toClear) {\n    this.score += toClear.length * 100;\n    this.scoreElement.textContent = `Score: ${this.score}`;\n    toClear.forEach((pos) => {\n      this.board.grid[pos[0]][pos[1]] = 0;\n    });\n  }\n  checkSettle() {\n    for (let row = 13; row >= 0; row--) {\n      for (let col = 9; col >= 0; col--) {\n        if (this.board.grid[row][col] !== 0 && this.board.grid[row + 1][col] === 0) {\n          this.settle(row, col);\n        }\n      }\n    }\n  }\n  settle(row, col) {\n    while (row < 14 && this.board.grid[row + 1][col] === 0) {\n      this.board.grid[row + 1][col] = this.board.grid[row][col];\n      this.board.grid[row][col] = 0;\n      row++;\n    }\n  }\n}\n\nexport default Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./docs/game.js\n// module id = 1\n// module chunks = 0","import Pew from './pew';\n\nclass Board {\n  constructor(game, canvas, ctx) {\n    this.game = game;\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.grid = new Array();\n    this.checkBoard = new Array();\n    this.COLORS = ['#00FFFF', '#A605FF', '#FF7400', '#FFFF00'];\n    for (let x = 0; x < 15; x++) {\n      this.grid[x] = new Array();\n      this.checkBoard[x] = new Array();\n      for (let y = 0; y < 10; y++) {\n        this.grid[x][y] = 0;\n        this.checkBoard[x][y] = false;\n      }\n    }\n    this.pews = []; //can probably get rid of this.\n    this.fallingPew = this.pews.slice(-1)[0];\n    this.move = this.move.bind(this);\n    this.gameOver = false;\n  }\n\n  reset() {\n    this.ctx.clearRect(0, 0 , this.canvas.width, this.canvas.height);\n  }\n  over() {\n    if (!this.grid[0].every(el => el === 0)) {\n      this.gameOver = true;\n    }\n  }\n\n  dropPew() {\n    this.over();\n    this.game.searchAndDestroy(this.grid, this.checkBoard);\n    document.addEventListener(\"keydown\", this.move);\n    this.createPew();\n    this.fallingPew = this.pews.slice(-1)[0];\n    this.fallingPew.callFall();\n  }\n  createPew() {\n    this.pews.push(new Pew(this));\n  }\n\n  draw() {\n    this.reset();\n    for (let row = 0; row < this.grid.length; row++) {\n      for (let col = 0; col < this.grid[row].length; col++) {\n        if (this.grid[row][col] !== 0) {\n          this.ctx.beginPath();\n          this.ctx.arc((((col + 1) * 30) - 15), (((row + 1) * 30) - 15), 15, 0, 2 * Math.PI);\n          this.ctx.fillStyle = this.COLORS[this.grid[row][col] - 1];\n          this.ctx.fill();\n        }\n      }\n    }\n  }\n  move(e) {\n    switch (e.keyCode) {\n      case 39: //right\n        this.fallingPew.moveRight(this.grid);\n        break;\n      case 37: //left\n        this.fallingPew.moveLeft(this.grid);\n        break;\n      case 38: //up - switch colors\n        this.fallingPew.switchColors(this.grid);\n        break;\n      case 40: //down\n        this.fallingPew.moveDown(this.grid);\n        break;\n      case 32: //spacebar - rotate\n        this.fallingPew.rotate(this.grid);\n        break;\n      default:\n        return;\n    }\n  }\n\n}\n\nexport default Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./docs/board.js\n// module id = 2\n// module chunks = 0","class Pew {\n  constructor(board) {\n    this.board = board;\n    this.row1 = 0;\n    this.col1 = Math.floor(Math.random() * 9);\n    this.row2 = 0;\n    this.col2 = this.col1 + 1;\n    this.board.grid[this.row1][this.col1] = Math.floor(Math.random() * 4) + 1;\n    this.board.grid[this.row2][this.col2] = Math.floor(Math.random() * 4) + 1;\n    this.stopped = false;\n    this.noSwitch = false;\n    this.horizontal = true;\n  }\n\n  posFilled(row, col) {\n    return this.board.grid[row][col] !== 0;\n  }\n  posEmpty(row, col) {\n    return this.board.grid[row][col] === 0;\n  }\n\n  callFall() {\n    if (!this.board.gameOver && this.board.game.playing) {\n      setTimeout(this.fall.bind(this), 250);\n    }\n  }\n\n  fall() {\n    if (this.row1 < 14 && this.row2 < 14) {\n      if (this.horizontal) {\n        //this.fallHorizontal(this.board.grid) {}\n        if (this.posFilled(this.row1 + 1, this.col1)) {\n          this.singleFall(this.board.grid, 2, this.col2);\n        } else if (this.posFilled(this.row2 + 1, this.col2)) {\n          this.singleFall(this.board.grid, 1, this.col1);\n        } else {\n          this.moveDown(this.board.grid);\n          this.callFall();\n        }\n      } else {\n        if (this.posEmpty(this.row2 + 1, this.col2)) {\n          //this.fallVertical(this.board.grid) {}\n          this.moveDownVertical(this.board.grid);\n          this.callFall();\n        } else {\n          this.stopped = true;\n        }\n      }\n    } else {\n      this.stopped = true;\n      this.noSwitch = true;\n    }\n    if (this.stopped) {\n      this.dropPew();\n    }\n  }\n\n  singleFall(grid, rowNum, col) {\n    this.noSwitch = true;\n    let row = this[`row${rowNum}`];\n    if (this.posEmpty(row + 1, col) && row < 14) {\n      grid[row + 1][col] = grid[row][col];\n      grid[row][col] = 0;\n      this[`row${rowNum}`]++;\n      this.board.draw();\n      this.callFall();\n    } else {\n      this.stopped = true;\n    }\n  }\n\n  dropPew() {\n    if (this.stopped) {\n      this.board.dropPew();\n    }\n  }\n\n  moveRight(grid) {\n    if (this.col2 < 9 && this.col1 < 9\n      && this.posEmpty(this.row2, this.col2 + 1)\n      && !this.stopped && !this.noSwitch) {\n        this.horizontal ? this.moveRightHorizontal(grid) : this.moveRightVertical(grid);\n\n        grid[this.row1][this.col1] = 0;\n        this.col1++;\n        this.col2++;\n        this.board.draw();\n    }\n  }\n  moveRightHorizontal(grid) {\n    grid[this.row2][this.col2 + 1] = grid[this.row2][this.col2];\n    grid[this.row2][this.col2] = grid[this.row1][this.col1];\n  }\n  moveRightVertical(grid) {\n    grid[this.row1][this.col1 + 1] = grid[this.row1][this.col1];\n    grid[this.row2][this.col2 + 1] = grid[this.row2][this.col2];\n    grid[this.row2][this.col2] = 0;\n  }\n  moveLeft(grid) {\n    if (this.col2 > 0 && this.col1 > 0\n      && this.posEmpty(this.row2, this.col1 - 1)\n      && !this.stopped && !this.noSwitch) {\n        this.horizontal ? this.moveLeftHorizontal(grid) : this.moveLeftVertical(grid);\n\n        this.col1--;\n        this.col2--;\n        this.board.draw();\n    }\n  }\n  moveLeftHorizontal(grid) {\n    grid[this.row1][this.col1 - 1] = grid[this.row1][this.col1];\n    grid[this.row2][this.col2 -1] = grid[this.row2][this.col2];\n    grid[this.row2][this.col2] = 0;\n  }\n  moveLeftVertical(grid) {\n    this.moveLeftHorizontal(grid);\n    grid[this.row1][this.col1] = 0;\n  }\n\n  switchColors(grid) {\n    if (!this.noSwitch) {\n      let hold = grid[this.row1][this.col1];\n      grid[this.row1][this.col1] = grid[this.row2][this.col2];\n      grid[this.row2][this.col2] = hold;\n      this.board.draw();\n    }\n  }\n  moveDown(grid) {\n    if (this.horizontal) {\n      this.moveDownHorizontal(grid);\n    } else {\n      this.moveDownVertical(grid);\n    }\n  }\n  moveDownHorizontal(grid) {\n    if (this.posEmpty(this.row1 + 1, this.col1)\n        && this.posEmpty(this.row2 + 1, this.col2)\n        && this.row1 < 14 && this.row2 < 14) {\n      grid[this.row1 + 1][this.col1] = grid[this.row1][this.col1];\n      grid[this.row2 + 1][this.col2] = grid[this.row2][this.col2];\n      grid[this.row1][this.col1] = 0;\n      grid[this.row2][this.col2] = 0;\n      this.row1++;\n      this.row2++;\n      this.board.draw();\n    }\n  }\n  moveDownVertical(grid) {\n    if (this.posEmpty(this.row2 + 1, this.col2)) {\n      grid[this.row2 + 1][this.col2] = grid[this.row2][this.col2];\n      grid[this.row1 + 1][this.col1] = grid[this.row1][this.col1];\n      grid[this.row1][this.col1] = 0;\n      this.row1++;\n      this.row2++;\n      this.board.draw();\n    }\n  }\n\n  rotate(grid) {\n    const dx = this.horizontal ? 1 : (-1);\n    const dy = this.horizontal ? (-1) : 1;\n    if (this.posEmpty(this.row2 + dx, this.col2 + dy) && !this.noSwitch) {\n      grid[this.row2 + dx][this.col2 +dy] = grid[this.row2][this.col2];\n      grid[this.row2][this.col2] = 0;\n      this.row2 = this.row2 + dx;\n      this.col2 = this.col2 + dy;\n      this.board.draw();\n      this.horizontal = !this.horizontal;\n    } else {\n      this.noSwitch = true;\n    }\n  }\n}\n\nexport default Pew;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./docs/pew.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}